:root {
      --bg-gradient: radial-gradient(circle at center, #1e1e2f 0%, #0a0a0f 100%);
      --sobre-base: #252440;
      --sobre-sombra: #161529;
      --sobre-luz: #36355a;
      --tapa-color: #e3edff;
      --oro-suave: rgba(212, 175, 55, 0.6);
}

body {
      margin: 0;
      background: var(--bg-gradient);
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
}

.escena {
      position: relative;
      perspective: 2000px;
      width: 380px;
      height: 240px;
}

/* SOBRE */
.sobre {
      position: absolute;
      inset: 0;
      z-index: 5;
      transition: transform 0.5s ease;
      /* IMPORTANTE: No usar overflow hidden aquí */
}

/* CUERPO TRASERO */
.cuerpo {
      position: absolute;
      inset: 0;
      background: var(--sobre-base);
      border-radius: 0 0 12px 12px;
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
      z-index: 1;
      /* Fondo del sandwich */
}

/* BOLSILLO DELANTERO */
.cuerpo::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(30deg, var(--sobre-sombra) 0%, var(--sobre-base) 50%, var(--sobre-luz) 100%);
      clip-path: polygon(0% 0%, 15% 0%, 50% 50%, 85% 0%, 100% 0%, 100% 100%, 0% 100%);
      border-radius: 0 0 12px 12px;
      z-index: 4;
      /* Esto tapa la carta mientras está abajo */
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      box-shadow: inset 0 20px 20px rgba(0, 0, 0, 0.3);
}

/* TAPA */
.tapa {
      position: absolute;
      top: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #ffffff, var(--tapa-color));
      clip-path: polygon(0 0, 50% 62%, 100% 0);
      z-index: 6;
      transform-origin: top;
      transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1), z-index 0.1s 0.4s;
}

.sobre.abierto .tapa {
      transform: rotateX(170deg);
      z-index: 2;
      /* Pasa detrás de la carta */
}

/* LA CARTA - CORRECCIÓN DE DESAPARICIÓN */
.carta {
      position: absolute;
      width: 340px;
      left: 50%;
      top: 50%;
      /* Posición inicial hundida */
      transform: translate(-50%, -20%) scale(0.9);
      z-index: 3;
      /* En medio de cuerpo (1) y bolsillo (4) */
      opacity: 0;
      pointer-events: none;

      /* Eliminamos el clip-path complejo que causaba que desapareciera */
      transition: transform 0.8s cubic-bezier(0.19, 1, 0.22, 1) 0.5s,
            opacity 0.5s ease 0.5s;

      filter: brightness(0.8);
}

/* ASOMADA: Ya es visible pero está detrás del bolsillo (z-index 4) */
.carta.asomada {
      opacity: 1;
      transform: translate(-50%, -70%) scale(0.95);
      filter: brightness(0.9);
}

/* VISIBLE: Sale por completo y se pone encima de todo */
.carta.visible {
      opacity: 1;
      transform: translate(-50%, -120%) scale(1.1);
      z-index: 10;
      /* Salta por encima del bolsillo (4) y la tapa (6) */
      filter: brightness(1) drop-shadow(0 20px 40px rgba(0, 0, 0, 0.5));
      pointer-events: auto;
      /* Transición rápida para el salto final */
      transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1), opacity 0.3s;
}

.texto {
      position: absolute;
      bottom: -60px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-family: 'Segoe UI', sans-serif;
      letter-spacing: 2px;
      opacity: 0.6;   }